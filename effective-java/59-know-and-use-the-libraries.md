# Today I Learned

| 구분 | 내용                        |
| ---- | --------------------------|
| DATE | 2024.02.02                |
| PART | 59. 라이브러리를 익히고 사용하라 |

# 10장 일반적인 프로그래밍 원칙
* 자바 언어의 핵심 요소에 집중
* 지역변수, 제어구조, 라이브러리, 데이터 타입
* 리플렉션과 네이티브 메서드
* 최적화와 명명 규칙

## Item59. 라이브러리를 익히고 사용하라

### Common but deeply flawed

#### 무작위 정수 생성
```java
static Random rnd = new Random();

static int random(int n) {
  return Math.abs(rnd.nextInt()) % n;
}
```
1. `n`이 그리 크지 않은 2의 제곱수라면 얼마 지나지 않아 같은 수열이 반복된다. 
2. `n`이 2의 제곱수가 아니라면 몇몇 숫자가 평균적으로 더 자주 반환된다. `n` 값이 크면 이 현상은 더 두드러진다. 
3. 지정한 범위 '바깥' 의 수가 종종 튀어나올 수 있다. `rnd.nextInt()`가 반환한 값을 `Math.abs`를 이용해 음수가 아닌 정수로 매핑하기 때문이다. `nextInt()`가 `Integer.MIN_VALUE`를 반환하면 `Math.abs`도 `Integer.MIN_VALUE`를 반환하고, 나머지 연산자(%)는 음수를 반환해버린다. (`n`이 2의 제곱수가 아닐 때) 

#### 문제해결
* 표준 라이브러리를 사용하면 그 코드를 작성한 전문가의 지식과 여러분보다 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다. 
* 자바 7부터는 `Random`을 더 이상 사용하지 않는 게 좋다. `ThreadLocalRandom`으로 대체하면 대부분 잘 동작한다. `Random`보다 더 고품질의 무작위 수를 생성할 뿐 아니라 속도도 더 빠르다. 
* fork-join pool 혹은 병렬 스트림에서는 `SplittableRandom`을 사용하라.

### Standard library 사용의 이점
1. 표준 라이브러리를 사용하면 그 코드를 작성한 전문가의 지식과 여러분보다 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다. 
2. 핵심적인 일과 크게 관련 없는 문제를 해결하느라 시간을 허비하지 않아도 된다. 하부 공사보다 애플리케이션 기능 개발에 집중할 수 있다. 
3. 따로 노력하지 않아도 성능이 지속해서 개선된다. 
4. 기능이 점점 많아진다.
5. 여러분이 작성한 코드가 많은 사람에게 낯익은 코드가 된다. 자연스럽게 다른 개발자들이 더 읽기 좋고, 유지보수하기 좋고, 재활용하기 쉬운 코드가 된다. 

##### 지정한 URL의 내용을 가져오는 cli
```java
public static void main(String[] args) throws IOException {
  try (InputStream in = new URL(args[0]).openStream()) {
    in.transferTo(System.out);
  }
}
```

#### Java의 표준 라이브러리
* 라이브러리가 너무 방대하여 모든 API 문서를 공부하긴 벅차겠지만, 자바 프로그래머라면 적어도 `java.lang`, `java.util`, `java.io`와 그 하위 패키지들에는 익숙해져야 한다.
* collection framework와 stream library, `java.util.concurrent`의 동시성 기능은 알아두면 큰 도움이 된다. 
* 다른 라이브러리들은 필요할 때마다 익히기 바란다. 
* 우선은 라이브러리를 사용하려 시도해보고, 원하는 기능이 아니라 판단되면 대안을 사용하자. 그 다음 선택지는 고품질의 서드파티 라이브러리가 될 것이다. e.g) guava 그래도 적합한 라이브러리도 못 찾았다면, 다른 선택지가 없으니 직접 구현하자. 
